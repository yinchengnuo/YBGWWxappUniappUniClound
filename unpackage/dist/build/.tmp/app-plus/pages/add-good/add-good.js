(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/add-good/add-good"],{"14eb":function(t,e,n){"use strict";var i,r=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return r}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},"314c":function(t,e,n){"use strict";n.r(e);var i=n("14eb"),r=n("a5ad");for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);n("8c54");var o,u=n("f0c5"),c=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,"56bbf0e0",null,!1,i["a"],o);e["default"]=c.exports},"8c54":function(t,e,n){"use strict";var i=n("f9cd"),r=n.n(i);r.a},a5ad:function(t,e,n){"use strict";n.r(e);var i=n("b024"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=r.a},b024:function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,r,a,o){try{var u=t[a](o),c=u.value}catch(s){return void n(s)}u.done?e(c):Promise.resolve(c).then(i,r)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function u(t){o(a,i,r,u,c,"next",t)}function c(t){o(a,i,r,u,c,"throw",t)}u(void 0)})}}function c(t,e){return l(t)||f(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0)if(n.push(o.value),e&&n.length===e)break}catch(c){r=!0,a=c}finally{try{i||null==u["return"]||u["return"]()}finally{if(r)throw a}}return n}function l(t){if(Array.isArray(t))return t}var d={data:function(){return{imgList:[],type:"",name:"",price:"",unit:""}},onLoad:function(t){this.type=this.$route.query.type,this.chooseImage()},methods:{chooseImage:function(){var e=this;this.imgList.length||t.chooseImage({sourceType:["camera"],sizeType:["compressed"]}).then(function(t){var n=c(t,2),i=n[1].tempFilePaths;return e.imgList=i})},viewImage:function(e){t.previewImage({urls:this.imgList})},delImg:function(e){var n=this;t.showModal({title:"删除",content:"确定删除这张商品图片嘛？",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&n.imgList.splice(e.currentTarget.dataset.index,1)}})},addGood:function(){var e=u(r.default.mark(function e(){var n,a,o,u,c,s=this;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.imgList.length){e.next=3;break}return t.showToast({title:"商品图片不能为空",icon:"none"}),e.abrupt("return");case 3:if(this.name){e.next=6;break}return t.showToast({title:"商品名称不能为空",icon:"none"}),e.abrupt("return");case 6:if(this.price){e.next=9;break}return t.showToast({title:"商品价格不能为空",icon:"none"}),e.abrupt("return");case 9:if(this.unit){e.next=12;break}return t.showToast({title:"商品单位不能为空",icon:"none"}),e.abrupt("return");case 12:return t.showLoading({mask:!0,title:"添加中..."}),e.next=15,i.uploadFile({filePath:this.imgList[0]});case 15:return n=e.sent,a=n.fileID,e.next=19,this.$mini(this.imgList[0]);case 19:return o=e.sent,e.next=22,i.uploadFile({filePath:o});case 22:u=e.sent,c=u.fileID,i.callFunction({name:"good-C",data:{url:c,_url:a,type:this.type,unit:this.unit,name:this.name,price:this.price,addTime:Date.now()}}).then(function(e){e.result;t.hideLoading(),t.showModal({title:"添加成功",showCancel:!1,content:"".concat(s.name,"    ").concat(s.price,"元 / ").concat(s.unit)}).then(function(){t.$emit("REFRESH".concat(s.type.split("-")[0])),s.$router.pop()})}).catch(function(e){t.hideLoading(),t.showToast({title:"上传失败，请联系成诺",icon:"none"})});case 25:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()}};e.default=d}).call(this,n("6e42")["default"],n("a9ff")["default"])},c460:function(t,e,n){"use strict";(function(t){n("232c"),n("921b");i(n("66fd"));var e=i(n("314c"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},f9cd:function(t,e,n){}},[["c460","common/runtime","common/vendor"]]]);